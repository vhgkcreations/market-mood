<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ðŸ“Š Market Mood Advisor</title>
  <link rel="icon" href="https://fav.farm/graph" />
  <style>
    :root {
      --bg: #f4f6f9;
      --text: #000;
      --card-bg: white;
    }
    .dark-mode {
      --bg: #111;
      --text: #f4f4f4;
      --card-bg: #1e1e1e;
    }
    body {
      font-family: Arial, sans-serif;
      background: var(--bg);
      color: var(--text);
      margin: 0;
      padding: 0;
      display: flex;
      flex-direction: column;
      align-items: center;
    }
    header {
      background: #007acc;
      color: white;
      padding: 1rem;
      width: 100%;
      text-align: center;
    }
    .container {
      max-width: 700px;
      background: var(--card-bg);
      margin: 20px;
      padding: 20px;
      border-radius: 12px;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
    }
    .card {
      border-radius: 10px;
      padding: 10px;
      margin: 10px 0;
      font-size: 16px;
    }
    .up { background-color: #28a745; color: white; }
    .down { background-color: #dc3545; color: white; }
    .neutral { background-color: #ffc107; color: #333; }
    .info { margin: 10px 0; }
    .timestamp {
      font-size: 14px;
      color: #666;
      margin-top: 10px;
    }
    .share-buttons a {
      margin: 0 10px;
      text-decoration: none;
      color: #007acc;
      font-weight: bold;
    }
    .toggle-dark {
      margin-top: 10px;
      cursor: pointer;
      font-size: 14px;
      color: #007acc;
    }
    input[type="text"] {
      width: 100%;
      margin: 5px 0;
      padding: 8px;
    }
    button {
      margin-top: 10px;
      padding: 10px 15px;
      font-size: 16px;
      background-color: #007acc;
      color: white;
      border: none;
      border-radius: 6px;
      cursor: pointer;
    }
  </style>
</head>
<body>
  <header>
    <h1 id="marketMoodTitle">ðŸ“Š Market Mood Advisor</h1>
  </header>
  <div class="container">
    <div id="moodCard" class="card neutral">Loading market mood...</div>
    <div id="reasons"></div>
    <div class="info">
      <strong>Enter Manual FII/DII Data:</strong><br/>
      FII Cash: <input type="text" id="fiiCash" placeholder="e.g. +1250" />
      FII Index Futures: <input type="text" id="fiiFut" placeholder="e.g. -230" />
      FII Index Options: <input type="text" id="fiiOpt" placeholder="e.g. +1420" />
      FII Stock Futures: <input type="text" id="fiiStock" placeholder="e.g. -320" />
      DII Cash: <input type="text" id="diiCash" placeholder="e.g. +400" />
    </div>
    <button onclick="updateMood()">Update Market Mood</button>
    <div class="timestamp" id="updatedTime">Last updated: --</div>
    <div class="toggle-dark" onclick="toggleDarkMode()">ðŸŒ˜ Toggle Dark Mode</div>
  </div>
  <script>
    const marketData = {
      dow: { value: 43089.02, change: 507.24 },
      nifty: { value: 25044.35, change: 72.45 },
      crude: { value: 65.05, change: 0.68 },
      usd: { value: 85.89, change: -0.41 },
      vix: { value: 13.64, change: -0.40 }
    };

    function toggleDarkMode() {
      document.body.classList.toggle("dark-mode");
    }

    function updateMood() {
      const fiiCash = parseFloat(document.getElementById("fiiCash").value) || 0;
      const fiiFut = parseFloat(document.getElementById("fiiFut").value) || 0;
      const fiiOpt = parseFloat(document.getElementById("fiiOpt").value) || 0;
      const fiiStock = parseFloat(document.getElementById("fiiStock").value) || 0;
      const diiCash = parseFloat(document.getElementById("diiCash").value) || 0;

      const reasons = [];
      let mood = "neutral";
      let advice = "âž– Prefer Neutral / Hedge";

      // Evaluate mood
      if (marketData.dow.change > 100) mood = "up";
      else if (marketData.dow.change < -100) mood = "down";

      if (fiiCash + fiiFut + fiiOpt > 1000) mood = "up";
      else if (fiiCash + fiiFut + fiiOpt < -1000) mood = "down";

      // Advice logic
      if (mood === "up") advice = "ðŸ“ˆ Prefer CE";
      else if (mood === "down") advice = "ðŸ“‰ Prefer PE";

      // Strike suggestion logic
      const base = Math.round(marketData.nifty.value / 50) * 50;
      let strike = mood === "up" ? base + 100 : mood === "down" ? base - 100 : base;
      let strikeMsg = `ðŸŽ¯ Suggested Strike: ${strike} ${mood === "up" ? 'CE' : mood === "down" ? 'PE' : 'Hedge'}`;

      // Reason display
      reasons.push(`ðŸ“ˆ Dow: ${marketData.dow.value} (${marketData.dow.change})`);
      reasons.push(`ðŸ’¹ Nifty: ${marketData.nifty.value} (${marketData.nifty.change})`);
      reasons.push(`ðŸ›¢ Crude Oil: ${marketData.crude.value} (${marketData.crude.change})`);
      reasons.push(`ðŸ’± USD/INR: â‚¹${marketData.usd.value} (${marketData.usd.change})`);
      reasons.push(`ðŸ“Š India VIX: ${marketData.vix.value} (${marketData.vix.change})`);
      reasons.push(`ðŸ“‹ FII/DII: FII Cash: â‚¹${fiiCash} Cr, Futures: â‚¹${fiiFut} Cr, Options: â‚¹${fiiOpt} Cr, Stock: â‚¹${fiiStock} Cr, DII: â‚¹${diiCash} Cr`);
      reasons.push(`ðŸ§  Advice: ${advice}`);
      reasons.push(strikeMsg);

      const moodCard = document.getElementById("moodCard");
      moodCard.textContent =
        mood === "up" ? "ðŸ“ˆ Market likely to open higher" :
        mood === "down" ? "ðŸ“‰ Market likely to open lower" :
        "âž– Sideways or Neutral mood";
      moodCard.className = `card ${mood}`;

      const reasonsEl = document.getElementById("reasons");
      reasonsEl.innerHTML = reasons.map(r => `<div class="info">âœ… ${r}</div>`).join("");

      const time = new Date().toLocaleString();
      document.getElementById("updatedTime").textContent = `Last updated: ${time}`;
    }

    updateMood();
  </script>
</body>
</html>
